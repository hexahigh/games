name: "Compress images"

on:
  workflow_dispatch:
  push:
    branches: [ "main" ]
  pull_request:
    # The branches below must be a subset of the branches above
    branches: [ "main" ]
  schedule:
    - cron: '44 8 * * 5'
    
jobs:
    build:
  
      name: Compressing images
      runs-on: ubuntu-latest
      steps:
        - name: Checkout the repo
          uses: actions/checkout@v2
          with:
            fetch-depth: 0 
        
        - name: Compress Images
          uses: calibreapp/image-actions@main
          with:
            # The `GITHUB_TOKEN` is automatically generated by GitHub and scoped only to the repository that is currently running the action. By default, the action canâ€™t update Pull Requests initiated from forked repositories.
            # See https://docs.github.com/en/actions/reference/authentication-in-a-workflow and https://help.github.com/en/articles/virtual-environments-for-github-actions#token-permissions
            githubToken: ${{ secrets.GITHUB_TOKEN }}
           
        - name: Create Pull Request
          uses: peter-evans/create-pull-request@v5.0.1

